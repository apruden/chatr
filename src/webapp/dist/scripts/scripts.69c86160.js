"use strict";angular.module("webappApp",["ngAnimate","ngEmbed","ngCookies","ngResource","ngRoute","ngSanitize","ngTouch","ui.bootstrap","btford.socket-io","pascalprecht.translate","angular-carousel","ngFileUpload","angular-inview","ui.router","gajus.swing"]).run(["$rootScope",function(a){a.$on("$stateChangeSuccess",function(){window.scrollTo(0,0)})}]).config(["$stateProvider","$urlRouterProvider","$httpProvider","$translateProvider",function(a,b,c,d){function e(a){var b=a.getProfile();return b.$promise}d.useStaticFilesLoader({prefix:"i18n/",suffix:".json"}).preferredLanguage("en").useSanitizeValueStrategy("escape"),e.$inject=["CachedProfile"],b.otherwise("/"),a.state("home",{url:"/",templateUrl:"views/main.html",controller:"MainCtrl"}).state("chat",{url:"/chat/:id",templateUrl:"views/chat.html",resolve:{currentUser:e},controller:"ChatCtrl"}).state("inbox",{url:"/inbox",templateUrl:"views/inbox.html",controller:"InboxCtrl"}).state("visitors",{url:"/visitors",templateUrl:"views/visits.html",controller:"VisitCtrl"}).state("profile",{url:"/profiles/:id",templateUrl:"views/profile.html",resolve:{currentUser:e},controller:"ProfileCtrl"}).state("profileCreate",{url:"/profiles/me/create",templateUrl:"views/profile_edit.html",controller:"ProfileEditCtrl"}).state("profileEdit",{url:"/profiles/me/edit",templateUrl:"views/profile_edit.html",controller:"ProfileEditCtrl"}).state("browse",{url:"/browse",templateUrl:"views/browse.html",resolve:{currentUser:e},controller:"BrowseCtrl"}).state("search",{url:"/search",templateUrl:"views/search.html",resolve:{currentUser:e},controller:"SearchCtrl"}),c.interceptors.push(["$injector",function(a){return a.get("AuthInterceptor")}])}]).controller("BaseCtrl",["$scope","$rootScope","$state","socketFactory","Profile",function(a,b,c,d,e){a.showNav=!1,a.socket=null,b.$on("$stateChangeError",function(){a.showNav=!1,c.go("home")}),b.$on("$stateChangeStart",function(b,c){"home"!==c.name&&"profileCreate"!==c.name?(a.showNav=!0,a.socket=d({prefix:""}),a.profile||(a.profile=e.get({id:"me"}))):(a.showNav=!1,a.socket=null,a.profile=null)})}]).controller("MainCtrl",["$scope","$state","$http","Profile",function(a,b,c,d){d.get({id:"me"}).$promise.then(function(){b.go("search")})["catch"](function(a){404===a.status&&b.go("profileCreate")}),a.loginFacebook=function(){FB.login(function(a){c.post("/api/_login",{access_token:a.authResponse.accessToken},function(){b.go("search")})},{scope:"public_profile,email"})},a.login=function(a){c.get("/api/_login?email="+a,function(){b.go("search")})}}]).controller("ChatCtrl",["$scope","Chat","$state","$stateParams","Profile","currentUser",function(a,b,c,d,e,f){a.me=f;var g=parseInt(d.id,10),h=f.id,i=h>g?g:h,j=i===g?h:g;a.to=e.get({id:g}),a.messages=b.query({id:g}),a.send=function(){var b={a:i,b:j,data:{body:a.body,username:f.username},sent:(new Date).toISOString(),to:g,fro:h};a.messages.push(b),a.socket.emit("msg",b),a.body=""},a.sendAck=function(b){var c={to:b.fro,id:b.id,sent:b.sent};b.read=!0,a.socket.emit("ack",c)},a.socket.on("msg",function(b){a.messages.push(b)}),a.socket.on("ack",function(b){a.messages.forEach(function(a){(a.id===b.id||b.sent===a.sent)&&(a.read=b.read)})}),a.olderMessages=[],a.offset=0,a.loadMore=function(){a.offset+=20,a.olderMessages=b.query({id:g,offset:a.offset}),a.olderMessages.$promise.then(function(b){b.forEach(function(b){a.messages.unshift(b)})})}}]).controller("InboxCtrl",["$scope","Chat",function(a,b){a.messages=b.query(),a.loadMore=function(c){a.offset+=20*c,a.messages=b.query({offset:a.offset}),window.scrollTo(0,0)}}]).controller("SearchCtrl",["$scope","Search","Cities","Criteria","currentUser",function(a,b,c,d,e){a.chunked=[],a.agesFrom=_.range(18,100),a.agesTo=_.range(18,100),a.query=e.criteria?angular.copy(e.criteria):{gender:e.gender?0:1,distance:50,location:e.location},a.profiles=b.query(a.query),a.profiles.$promise.then(function(b){a.chunked=_.toArray(_.groupBy(b,function(a,b){return Math.floor(b/3)}))}),a.search=function(){angular.equals(a.query,e.criteria)||d.save(a.query),a.profiles=b.query(a.query),a.profiles.$promise.then(function(b){a.chunked=_.toArray(_.groupBy(b,function(a,b){return Math.floor(b/3)}))})},a.loadMore=function(c){a.offset+=20*c;var d=angular.extend(a.query,{offset:a.offset});a.profiles=b.query(d),a.profiles.$promise.then(function(b){a.chunked=_.toArray(_.groupBy(b,function(a,b){return Math.floor(b/3)}))}),window.scrollTo(0,0)}}]).controller("BrowseCtrl",["$scope","Profile","Search","Criteria","currentUser",function(a,b,c,d,e){a.agesFrom=_.range(18,100),a.agesTo=_.range(18,100),a.query=e.criteria?angular.copy(e.criteria):{gender:e.gender?0:1,distance:50,location:e.location},a.profiles=c.query(a.query),a.search=function(){angular.equals(a.query,e.criteria)||d.save(a.query),a.profiles=c.query(a.query)},a.loadMore=function(b){a.offset+=20*b;var d=angular.extend(a.query,{offset:a.offset});a.profiles=c.query(d)},a.swingOptions={throwOutConfidence:function(a,b){var c=Math.min(1.5*Math.abs(a)/b.offsetWidth,1);return c},isThrowOut:function(a,b,c){return 1===c}},a.remove=function(c,d,e){e.throwDirection>0&&b.like({id:d.id}),a.profiles.splice(c,1),e.target.parentNode.removeChild(e.target),0===a.profiles.length&&a.loadMore()}}]).controller("VisitCtrl",["$scope","Visit",function(a,b){a.offset=0,a.chunked=[],a.visits=b.query(),a.visits.$promise.then(function(b){a.chunked=_.toArray(_.groupBy(b,function(a,b){return Math.floor(b/3)}))}),a.loadMore=function(c){a.offset+=20*c,a.visits=b.query({offset:a.offset}),a.visits.$promise.then(function(b){a.chunked=_.toArray(_.groupBy(b,function(a,b){return Math.floor(b/3)}))}),window.scrollTo(0,0)}}]).controller("ProfileCtrl",["$scope","$state","$stateParams","Profile","currentUser",function(a,b,c,d,e){a.canEdit="me"===c.id,a.canSend=!0,a.profile=d.get({id:c.id,username:e.username,age:e.age,city:e.city}),a.editProfile=function(){b.go("profileEdit")},a.message="",a.sendMessage=function(){var b=parseInt(c.id,10),d=e.id,f=d>b?b:d,g=f===b?d:b,h={a:f,b:g,data:{body:a.message,username:e.username},sent:(new Date).toISOString(),to:b,fro:d};a.socket.emit("msg",h),a.canSend=!1}}]).controller("ProfileEditCtrl",["$scope","$state","$stateParams","Profile","Upload","Cities",function(a,b,c,d,e,f){a.genders=[{label:"male",value:0},{label:"female",value:1}],a.dobYears=_.range(2e3,1916,-1),a.dobMonths=_.range(1,12),a.dobDays=_.range(1,31),a.profile=d.get({id:"me"}),a.profile.$promise.then(function(){var b=a.profile.dob?new Date(a.profile.dob):null;a.year=b?b.getUTCFullYear():null,a.month=b?b.getUTCMonth()+1:null,a.day=b?b.getUTCDate():null,a.selectedLocation=a.profile.city?{name:a.profile.city}:null,a.profile.photos=a.profile.photos||[]})["catch"](function(){a.profile.photos=[]}),a.upload=function(b){e.upload({url:"/api/_upload",data:{file:b}}).then(function(b){console.log("Success "+b.config.data.file.name+"uploaded. Response: "+b.data),a.profile.photos=a.profile.photos||[],0===a.profile.photos.length&&(b.data.isMain=!0),a.profile.photos.push(b.data)},function(a){console.log("Error status: "+a.status)},function(a){var b=parseInt(100*a.loaded/a.total);console.log("progress: "+b+"% "+a.config.data.file.name)})},a.getLocation=function(a){return f.query({q:a}).$promise},a.onSelectedLocation=function(b){a.profile.city=b.name,a.profile.location=b.location},a.onMainChanged=function(b){a.profile.photos.forEach(function(a){a!==b?a.isMain=!1:a.isPrivate=!1})},a.deletePhoto=function(b){a.profile.photos.splice(b,1)},a.onPrivateChanged=function(a){a.isMain=a.isMain&&!a.isPrivate},a.saveProfile=function(){a.profile.dob=[a.year,a.month,a.day].join("-"),a.profile.$save(function(){b.go("profile",{id:"me"})})},a.cancelEdit=function(){b.go("profile",{id:"me"})}}]).service("Cities",["$resource",function(a){return a("/api/cities")}]).service("Chat",["$resource",function(a){return a("/api/chats/:id",{id:"@id"})}]).service("Visit",["$resource",function(a){return a("/api/visits")}]).service("Profile",["$resource",function(a){return a("/api/profiles/:id/:verb",{id:"@id",verb:"@verb"},{like:{method:"POST",params:{verb:"_like"}}})}]).service("CachedProfile",["Profile",function(a){return this.profile=null,this.getProfile=function(){return this.profile?this.profile:a.get({id:"me"})},this}]).service("Criteria",["$resource",function(a){return a("/api/profiles/me/criteria")}]).service("Search",["$resource",function(a){return a("/api/search")}]).factory("AuthInterceptor",["$q","$rootScope",function(a,b){return{request:function(a){return a=a||{}},responseError:function(c){return c.config&&c.config.handleError?a.reject(c):(401===c.status||403===c.status?b.$broadcast("AUTH_ERROR",c):b.$broadcast("SERVER_ERROR",c),a.reject(c))}}}]),angular.module("webappApp").run(["$templateCache",function(a){a.put("views/about.html","<p>This is the about view.</p>"),a.put("views/browse.html",'<div class="row"> <div class="col-xs-12"> <form novalidate name="searchForm" class="form" ng-submit="searchForm.$valid && search()"> <div class="row"> <div class="form-group col-md-2 col-xs-4" ng-class="{\'has-error\': searchForm.distance.$invalid}"> <label for="distance" translate>distance</label> <select name="distance" ng-model="query.distance" ng-options="d for d in [50,75,100]" class="form-control" required> </select> </div> <div class="form-group col-md-2 col-xs-4" ng-class="{\'has-error\': searchForm.dobFrom.$invalid}"> <label for="dobFrom" translate>age</label> <select name="dobFrom" ng-model="query.dobFrom" ng-options="d for d in agesFrom" class="form-control" required> </select> </div> <div class="form-group col-md-2 col-xs-4" ng-class="{\'has-error\': searchForm.dobTo.$invalid}"> <label for="dobTo" translate>to</label> <select name="dobTo" ng-model="query.dobTo" ng-options="d for d in agesTo" class="form-control" required> </select> </div> </div> </form> </div> </div> <div class="row" ng-if="!profiles || profiles.length === 0"> <div class="col-xs-12"> <div class="alert alert-info" role="alert"> <p translate>noProfiles</p> </div> </div> </div> <div class="row"> <div class="col-md-8 col-xs-12 col-md-offset-2"> <div class="form-group stack-container"> <ul class="stack list-unstyled" swing-stack swing-options="swingOptions"> <li swing-card ng-repeat="profile in profiles" swing-on-throwout="remove($index, profile, eventObject)" ng-style="{\'background-image\': \'url(\' + profile.photo.filename + \')\'}"> </li> </ul> </div> </div> </div>'),a.put("views/chat.html",'<div class="row"> <div class="navbar navbar-default navbar-fixed-top second-nav" role="navigation"> <div class="container"> <div class="collapse navbar-collapse navbar-header"> <a class="navbar-brand navbar-chat" ng-href="#!/profiles/{{to.id}}"><img ng-style="{\'background-image\': \'url(/api/assets/\' + to.id + \'.jpg), url(http://placehold.it/50x50)\', \'background-size\': \'cover\', \'background-position\':\'center center\', \'background-repeat\': \'no-repeat\', \'width\': \'50px\', height: \'50px\', display: \'inline-block\'}"> {{to.username}}, {{to.age}}, {{to.city}}</a> </div> </div> </div> </div> <div class="row top-buffer"> <div class="col-xs-12"> <nav aria-label="loadMore" ng-if="hasMore"> <ul class="pager"> <li ng-show="olderMessages.length === 20 || (offset === 0 && messages.length === 20)"><a href ng-click="loadMore()" translate>prev</a></li> </ul> </nav> </div> </div> <div class="row"> <div class="col-xs-12"> <div class="row" ng-repeat="msg in messages"> <div class="col-xs-10" ng-class="{\'col-xs-offset-2\': msg.fro === me.id }"> <div in-view="$inview && !msg.read && msg.fro !== me.id && sendAck(msg)" class="alert" ng-class="{\'alert-info\': msg.fro === me.id, \'chat-default\': msg.to === me.id }"> <div ng-bind-html="msg.data.body | embed"></div> <div class="row"> <div class="col-xs-12 text-right"> <span class="small text-muted">{{msg.sent}}</span> <i ng-show="msg.read && msg.fro === me.id" class="glyphicon glyphicon-ok"></i> </div> </div> </div> </div> </div> </div> </div> <div class="row"> <div class="col-xs-12"> <form ng-submit="send()"> <div class="form-group"> <textarea class="form-control" ng-model="body"></textarea> </div> <button type="submit" class="btn btn-primary pull-right" translate>send</button> </form> </div> </div>'),a.put("views/inbox.html",'<div class="row"> <div class="col-xs-12"> <div class="alert alert-info" role="alert" ng-if="!messages || messages.length === 0"> <p translate>noMessages</p> </div> <ul class="media-list"> <li class="media" ng-repeat="msg in messages"> <div class="media-left"> <a ng-href="#!/chat/{{msg.fro}}"> <div class="img-overlay-sm"> <img class="media-object" ng-style="{\'background-image\': \'url(/api/assets/{{msg.fro}}.jpg), url(http://placehold.it/200x200)\', \'background-size\': \'cover\', \'background-position\':\'center center\', \'background-repeat\': \'no-repeat\', \'width\': \'128px\', height: \'128px\'}"> <div class="thumb-overlay" ng-if="msg.online"> <i class="glyphicon glyphicon-signal"></i> </div> </div> </a> </div> <div class="media-body"> <h4 class="media-heading"> <a ng-href="#!/chat/{{msg.fro}}"> {{msg.data.username}} <span ng-if="!msg.read" class="label label-success"><i class="glyphicon glyphicon-comment"></i> <span translate>new</span></span> </a> </h4> <span>{{msg.sent}}</span> </div> </li> </ul> </div> </div> <div class="row"> <div class="col-xs-12"> <nav aria-label="loadMore"> <ul class="pager"> <li ng-show="offset"><a href ng-click="loadMore(-1)" translate>prev</a></li> <li ng-show="messages.length === 20"><a href ng-click="loadMore(1)" translate>next</a></li> </ul> </nav> </div> </div>'),a.put("views/main.html",'<div class="jumbotron"> <h1>chatr</h1> <p class="lead"> <img src="images/yeoman.8cb970fb.png" alt="I\'m Yeoman"><br> Dating app. </p> <button class="btn btn-primary" ng-click="loginFacebook()">facebook</button> </div>'),a.put("views/profile.html",'<div class="row"> <div class="col-xs-12"> <form class="pull-right"> <div class="form-group"> <button ng-if="canEdit" class="btn btn-primary" ng-click="editProfile()" translate>edit</button> </div> </form> </div> </div> <div class="row"> <div class="col-xs-12"> <h3>{{profile.username}} - {{profile.headline}}</h3> </div> </div> <div class="row" ng-if="profile.photos && profile.photos.length > 0"> <div class="col-xs-12"> <div class="form-group"> <ul rn-carousel rn-carousel-index="gallery" rn-carousel-controls> <li ng-repeat="photo in profile.photos"> <div ng-style="{\'background-image\': \'url(/api/assets/\' + photo.filename + \')\'}" class="bgimage"></div> </li> </ul> </div> </div> </div> <div class="row"> <div class="col-xs-12"> <h4 translate>description</h4> <div class="well"> <dl class="dl-horizontal"> <dt translate>age</dt> <dd>{{profile.age}}</dd> <dt translate>city</dt> <dd>{{profile.city}}</dd> </dl> </div> <h4 translate>about</h4> <div ng-bind-html="profile.about | embed"></div> </div> </div> <div class="row" ng-show="!canEdit"> <div class="col-xs-12"> <h4 translate>message</h4> <div class="alert alert-success" role="alert" ng-show="!canSend"> <p><span translate>messageSent</span> <a ng-href="#!/chat/{{profile.id}}" translate>goToConversation</a></p> </div> <form name="sendMessageForm" ng-submit="sendMessage()" ng-show="canSend"> <div class="form-group"> <textarea id="message" ng-model="message" class="form-control" name="message"></textarea> </div> <button class="btn btn-primary pull-right" type="submit" translate>send</button> </form> </div> </div>'),a.put("views/profile_edit.html",'<div class="row"> <div class="col-xs-12"> <form name="profileForm" ng-submit="profileForm.$valid && saveProfile()" novalidate> <div ng-show="!profile.id" class="form-group" ng-class="{\'has-error\': profileForm.username.$invalid}"> <label for="username" translate>username</label> <input id="username" name="username" ng-model="profile.username" class="form-control" type="text" required> </div> <div ng-show="!profile.id" class="form-group" ng-class="{\'has-error\': profileForm.gender.$invalid}"> <label for="gender" translate>gender</label> <select name="gender" ng-model="profile.gender" ng-options="d.value as d.label for d in genders" class="form-control" required></select> </div> <div ng-show="!profile.id" class="form-group"> <label for="dob" translate>dob</label> <div class="form-inline"> <div class="form-group col-md-4 col-xs-4" ng-class="{\'has-error\': profileForm.year.$invalid}"> <select name="year" ng-model="year" ng-options="d for d in dobYears" class="form-control" required></select> </div> <div class="form-group col-md-4 col-xs-4" ng-class="{\'has-error\': profileForm.month.$invalid}"> <select name="month" ng-model="month" ng-options="d for d in dobMonths" class="form-control" required></select> </div> <div class="form-group col-md-4 col-xs-4" ng-class="{\'has-error\': profileForm.day.$invalid}"> <select name="day" ng-model="day" ng-options="d for d in dobDays" class="form-control" required></select> </div> </div> </div> <div class="form-group" ng-class="{\'has-error\': profileForm.city.$invalid}"> <label for="city" translate>city</label> <input name="city" type="text" class="form-control" id="city" placeholder="city" uib-typeahead="city as city.name for city in getLocation($viewValue)" typeahead-loading="loadingLocations" typeahead-editable="false" typeahead-input-formatter="$model.name" typeahead-on-select="onSelectedLocation($item)" ng-model="selectedLocation" autocomplete="off" required> <i ng-show="loadingLocations" class="fa fa-refresh"></i> </div> <div class="form-group" ng-class="{\'has-error\': profileForm.headline.$invalid}"> <label for="headline" translate>headline</label> <input id="headline" name="headline" ng-model="profile.headline" class="form-control" type="text" required> </div> <div class="form-group" ng-class="{\'has-error\': profileForm.about.$invalid}"> <label for="about" translate>about</label> <textarea id="about" name="about" ng-model="profile.about" class="form-control" required></textarea> </div> <div class="row"> <div class="col-md-3" ng-repeat="photo in profile.photos"> <div class="thumbnail"> <img ng-src="/api/assets/{{photo.filename}}" alt=""> <div class="caption"> <div class="radio"> <label> <input type="radio" ng-model="photo.isMain" ng-change="onMainChanged(photo)" ng-value="true"><span translate>main</span> </label> </div> <div class="checkbox"> <label> <input type="checkbox" ng-model="photo.isPrivate" ng-change="onPrivateChanged(photo)" ng-disabled="photo.isMain"><span translate>private</span> </label> </div> <p><a class="btn btn-default" href translate ng-click="deletePhoto($index)" role="button">delete</a></p> </div> </div> </div> </div> <div class="form-group" ng-show="profile.photos.length < 5" ng-class="{\'has-error\': profileForm.picFile.$invalid}"> <label for="picFile">uploadPhoto</label> <input id="picFile" type="file" name="picFile" ng-required="profile.photos.length === 0" class="form-control" ng-model="file" ngf-select="upload($file)" ngf-patter=".jpg" ngf-resize="{width: 800, height: 500, quality: 0.8, type: \'image/jpeg\', centerCrop: true, pattern: \'.jpg\', restoreExif: false}"> </div> <div class="form-group"> <button class="btn btn-primary" type="submit" translate>save</button> <button class="btn btn-default" ng-click="cancelEdit()" translate>cancel</button> </div> </form> </div> </div>'),a.put("views/search.html",'<div class="row"> <div class="col-xs-12"> <form novalidate name="searchForm" class="form" ng-submit="searchForm.$valid && search()"> <div class="row"> <div class="form-group col-md-2 col-xs-4" ng-class="{\'has-error\': searchForm.distance.$invalid}"> <label for="distance" translate>distance</label> <select name="distance" ng-model="query.distance" ng-options="d for d in [50,75,100]" class="form-control" required> </select> </div> <div class="form-group col-md-2 col-xs-4" ng-class="{\'has-error\': searchForm.dobFrom.$invalid}"> <label for="dobFrom" translate>age</label> <select name="dobFrom" ng-model="query.dobFrom" ng-options="d for d in agesFrom" class="form-control" required> </select> </div> <div class="form-group col-md-2 col-xs-4" ng-class="{\'has-error\': searchForm.dobTo.$invalid}"> <label for="dobTo" translate>to</label> <select name="dobTo" ng-model="query.dobTo" ng-options="d for d in agesTo" class="form-control" required> </select> </div> </div> </form> </div> </div> <div class="row" ng-if="!profiles || profiles.length === 0"> <div class="col-xs-12"> <div class="alert alert-info" role="alert"> <p translate>noProfiles</p> </div> </div> </div> <div class="row" ng-repeat="chunk in chunked"> <div class="col-md-4" ng-repeat="profile in chunk"> <div class="thumbnail"> <a ng-href="#!/profiles/{{profile.id}}"> <div class="img-overlay-md center-block"> <img ng-style="{\'background-image\': \'url(/api/assets/{{profile.id}}.jpg), url(http://placehold.it/200x200)\', \'background-size\': \'cover\', \'background-position\':\'center center\', \'background-repeat\': \'no-repeat\', \'width\': \'200px\', height: \'200px\'}"> <div class="thumb-overlay" ng-if="profile.online"> <i class="glyphicon glyphicon-signal"></i> </div> </div> </a> <div class="caption"> <h4> <a ng-href="#!/profiles/{{profile.id}}">{{profile.username}}, {{profile.age}}, {{profile.city}}</a> </h4> <p>{{profile.headline}}</p> </div> </div> </div> </div> <div class="row"> <div class="col-xs-12"> <nav aria-label="loadMore"> <ul class="pager"> <li ng-show="offset"><a href ng-click="loadMore(-1)" translate>prev</a></li> <li ng-show="profiles.length === 20"><a href ng-click="loadMore(1)" translate>next</a></li> </ul> </nav> </div> </div>'),a.put("views/settings.html",'<form> <div class="form-group"> <label for="username" translate>username</label> <input name="username" class="form-control" type="text"> </div> <div class="form-group"> <label for="email" translate>email</label> <input name="email" class="form-control" type="text"> </div> <div class="form-group"> <label for="password" translate>password</label> <input name="password" class="form-control" type="password"> </div> <div class="form-group"> <label for="repassword" translate>repassword</label> <input name="repassword" class="form-control" type="password"> </div> </form>'),a.put("views/visits.html",'<div class="row" ng-if="!visits || visits.length === 0"> <div class="col-xs-12"> <div class="alert alert-info" role="alert"> <p translate>noVisits</p> </div> </div> </div> <div class="row" ng-repeat="chunk in chunked"> <div class="col-md-4" ng-repeat="visit in chunk"> <div class="thumbnail"> <a href="#!/profiles/{{visit.fro}}"> <div class="img-overlay-md center-block"> <img ng-style="{\'background-image\': \'url(/api/assets/{{visit.fro}}.jpg), url(http://placehold.it/200x200)\', \'background-size\': \'cover\', \'background-position\':\'center center\', \'background-repeat\': \'no-repeat\', \'width\': \'200px\', height: \'200px\'}"> <div class="thumb-overlay" ng-if="visit.online"> <i class="glyphicon glyphicon-signal"></i> </div> </div> </a> <div class="caption"> <h4> <a href="#!/profiles/{{visit.fro}}">{{visit.data.username}}, {{visit.data.age}}, {{visit.data.city}} <span ng-if="!visit.read" class="label label-success"><i class="glyphicon glyphicon-eye-open"></i> <span translate>new</span></span></a> </h4> </div> </div> </div> </div> <div class="row"> <div class="col-xs-12"> <nav aria-label="loadMore"> <ul class="pager"> <li ng-show="offset"><a href ng-click="loadMore(-1)" translate>prev</a></li> <li ng-show="visits.length === 20"><a href ng-click="loadMore(1)" translate>next</a></li> </ul> </nav> </div> </div>')}]);